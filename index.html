<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- SEO and Meta Tags -->
  <title>Donuts mama - Toko Donut Premium di Cianjur</title>
  <meta name="description" content="Donuts mama adalah toko donut premium di Cianjur yang menyediakan berbagai varian donat dengan kualitas terbaik. Pesan box donut custom sesuai selera Anda." />
  <meta name="keywords" content="donut, cianjur, sweetbox, donut cianjur, toko donut, donut premium, custom donut box" />
  <meta name="author" content="SweetBox Donuts" />
  <meta name="robots" content="index, follow" />
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="SweetBox Donuts - Toko Donut Premium di Cianjur" />
  <meta property="og:description" content="Donuts mama adalah toko donut premium di Cianjur yang menyediakan berbagai varian donat dengan kualitas terbaik. Pesan box donut custom sesuai selera Anda." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://donutsmamaa.vercel.app" />
  <meta property="og:image" content="https://i.ibb.co.com/cKbyHVWk/file-000000006db07206a3a8b5677abc49e6.png" />
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Donuts mama - Toko Donut Premium di Cianjur" />
  <meta name="twitter:description" content="Donuts mama adalah toko donut premium di Cipanas yang menyediakan berbagai varian donat dengan kualitas terbaik." />
  <meta name="twitter:image" content="https://i.ibb.co.com/cKbyHVWk/file-000000006db07206a3a8b5677abc49e6.png" />
  <meta name="google-site-verification" content="lo2i6ODbwu44PJEIBP84zXDCA8-lCORqVHopTyYjAOY" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co.com/xq0RdvqB/file-0000000041c87206a3a4d155bc0f6ca6.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://i.ibb.co.com/xq0RdvqB/file-0000000041c87206a3a4d155bc0f6ca6.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://i.ibb.co.com/xq0RdvqB/file-0000000041c87206a3a4d155bc0f6ca6.png">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiU3dlZXRCb3ggRG9udXRzIiwic2hvcnRfbmFtZSI6IlN3ZWV0Qm94IiwiZGVzY3JpcHRpb24iOiJCdWlsZCB5b3VyIG93biBkb251dCBib3gg4oCTIG1pbmltYWxpc3QgZWRpdGlvbi4iLCJzdGFydF91cmwiOiIuIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJ0aGVtZV9jb2xvciI6IiMwMDAwMDAiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiI2ZmZmZmZiIsImljb25zIjpbeyJzcmMiOiJodHRwczovL2kuaW1ndXIuY29tLzdaVm5mVUgucG5nIiwic2l6ZXMiOiIxOTJ4MTkyIiwidHlwZSI6ImltYWdlL3BuZyJ9XX0=">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    body {
      font-family: 'Poppins', sans-serif;
      color: #000;
      background: #fff;
      overflow-x: hidden;
    }

    .donut-slot {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: #f4f4f4;
      transition: 0.2s ease;
      position: relative;
      overflow: hidden;
    }
    
    .donut-slot.filled { 
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .donut-slot.filled::before {
      content: '';
      position: absolute;
      width: 15px;
      height: 15px;
      background: white;
      border-radius: 50%;
      z-index: 1;
    }
    
    .donut-slot.filled::after {
      content: 'âœ–';
      position: relative;
      z-index: 2;
      color: white;
      font-size: 14px;
    }

    .varian-card {
      flex: 0 0 auto;
      width: 130px;
      cursor: pointer;
      transition: all 0.3s ease;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .varian-card:hover { 
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    }
    
    .varian-card img {
      height: 100px;
      object-fit: cover;
    }

    .scroll-x { 
      overflow-x: auto; 
      scrollbar-width: none;
      -webkit-overflow-scrolling: touch;
    }
    
    .scroll-x::-webkit-scrollbar { 
      display: none; 
    }

    /* Floating icons group */
    .floating-icons {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      display: flex;
      gap: 0.75rem;
      z-index: 50;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    
    .floating-icon {
      background: white;
      border: 1px solid #000;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .floating-icon:hover {
      background: black;
      color: white;
      transform: scale(1.1);
    }

    /* Sidebars */
    .sidebar {
      position: fixed;
      top: 0;
      height: 100vh;
      width: 320px;
      background: #fff;
      box-shadow: -5px 0 15px rgba(0,0,0,0.1);
      padding: 25px;
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      z-index: 40;
      display: flex;
      flex-direction: column;
      right: -320px;
    }
    
    .sidebar.open {
      right: 0;
    }
    
    .sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }
    
    .close-sidebar {
      cursor: pointer;
      font-size: 18px;
      transition: transform 0.2s;
    }
    
    .close-sidebar:hover {
      transform: rotate(90deg);
    }
    
    /* Box buttons */
    .box-btn {
      position: relative;
      overflow: hidden;
      z-index: 1;
    }
    
    .box-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: black;
      z-index: -1;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }
    
    .box-btn:hover::before {
      transform: translateY(0);
    }
    
    .box-btn:hover {
      color: white;
    }
    
    .box-btn.active {
      background: black;
      color: white;
    }
    
    /* Search box */
    .search-container {
      position: relative;
      margin-bottom: 25px;
    }
    
    .search-container i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #666;
    }
    
    #searchInput {
      padding-left: 45px;
      border-radius: 30px;
      border: 1px solid #ddd;
      transition: all 0.3s ease;
    }
    
    #searchInput:focus {
      border-color: #000;
      box-shadow: 0 0 0 3px rgba(0,0,0,0.1);
    }
    
    /* Autocomplete */
    .autocomplete-container {
      position: relative;
    }
    
    .autocomplete-items {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #ddd;
      border-top: none;
      border-radius: 0 0 8px 8px;
      max-height: 200px;
      overflow-y: auto;
      z-index: 10;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .autocomplete-item {
      padding: 10px 15px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .autocomplete-item:hover {
      background: #f5f5f5;
    }
    
    /* Donut grid */
    #donutGrid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
      gap: 10px;
      max-width: 500px;
      margin: 0 auto;
    }
    
    /* Cart and recent items */
    .cart-item, .recent-item {
      background: #f9f9f9;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      transition: all 0.3s ease;
    }
    
    .cart-item:hover, .recent-item:hover {
      background: #f0f0f0;
      transform: translateX(-5px);
    }
    
    .cart-item-header, .recent-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .cart-item-name, .recent-item-name {
      font-weight: 600;
      text-transform: uppercase;
    }
    
    .cart-item-price, .recent-item-price {
      font-weight: 500;
    }
    
    .cart-item-content, .recent-item-content {
      font-size: 14px;
      color: #666;
      margin-bottom: 10px;
    }
    
    .cart-item-actions, .recent-item-actions {
      display: flex;
      justify-content: space-between;
    }
    
    .btn-remove, .btn-buy {
      background: transparent;
      border: 1px solid #ddd;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      text-transform: uppercase;
      transition: all 0.2s;
    }
    
    .btn-remove:hover {
      background: #ffeded;
      border-color: #ff6b6b;
      color: #ff6b6b;
    }
    
    .btn-buy {
      background: #000;
      color: white;
      border-color: #000;
    }
    
    .btn-buy:hover {
      background: #333;
      border-color: #333;
    }
    
    /* Payment button */
    .btn-payment {
      background: #000;
      color: white;
      border: none;
      padding: 15px;
      border-radius: 8px;
      font-weight: 600;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 20px;
      position: relative;
      overflow: hidden;
    }
    
    .btn-payment::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #333;
      z-index: -1;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }
    
    .btn-payment:hover::before {
      transform: translateX(0);
    }
    
    .btn-payment:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 30px 0;
      color: #999;
    }
    
    .empty-state i {
      font-size: 40px;
      margin-bottom: 15px;
      color: #ddd;
    }
    
    /* Badge */
    .badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #ff6b6b;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 600;
    }
    
    /* Toast notification */
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #333;
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      z-index: 100;
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    
    /* Payment Page - Swipe Up Style */
    .payment-page {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 85vh;
      background: white;
      z-index: 100;
      display: flex;
      flex-direction: column;
      transform: translateY(100%);
      transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -5px 20px rgba(0,0,0,0.15);
      overflow: hidden;
    }
    
    .payment-page.active {
      transform: translateY(0);
    }
    
    .payment-handle {
      width: 60px;
      height: 5px;
      background: #ddd;
      border-radius: 5px;
      margin: 15px auto;
    }
    
    .payment-container {
      flex: 1;
      overflow-y: auto;
      padding: 0 20px 20px;
    }
    
    .payment-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }
    
    .payment-title {
      font-size: 24px;
      font-weight: 700;
      text-transform: uppercase;
    }
    
    .close-payment {
      cursor: pointer;
      font-size: 20px;
      transition: transform 0.2s;
    }
    
    .close-payment:hover {
      transform: rotate(90deg);
    }
    
    .payment-section {
      margin-bottom: 25px;
    }
    
    .payment-section-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 15px;
      text-transform: uppercase;
      display: flex;
      align-items: center;
    }
    
    .payment-section-title i {
      margin-right: 10px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      text-transform: uppercase;
      font-size: 14px;
    }
    
    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s ease;
      box-sizing: border-box;
    }
    
    .form-input:focus, .form-select:focus, .form-textarea:focus {
      border-color: #000;
      box-shadow: 0 0 0 3px rgba(0,0,0,0.1);
      outline: none;
    }
    
    .form-textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .delivery-options {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .delivery-option {
      flex: 1;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .delivery-option:hover {
      border-color: #000;
    }
    
    .delivery-option.active {
      background: #000;
      color: white;
      border-color: #000;
    }
    
    .delivery-option i {
      font-size: 24px;
      margin-bottom: 8px;
      display: block;
    }
    
    .delivery-area {
      display: none;
    }
    
    .delivery-area.active {
      display: block;
    }
    
    .pickup-info {
      display: none;
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .pickup-info.active {
      display: block;
    }
    
    .order-summary {
      background: #f9f9f9;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 25px;
    }
    
    .order-summary-title {
      font-weight: 600;
      margin-bottom: 15px;
      text-transform: uppercase;
    }
    
    .order-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    
    .order-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .order-item-name {
      font-weight: 500;
    }
    
    .order-item-price {
      font-weight: 600;
    }
    
    .order-total {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #ddd;
      font-weight: 700;
      font-size: 18px;
    }
    
    .whatsapp-btn {
      background: #000;
      color: white;
      border: none;
      padding: 15px;
      border-radius: 8px;
      font-weight: 600;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }
    
    .whatsapp-btn:hover {
      background: #333;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .whatsapp-btn i {
      margin-right: 10px;
      font-size: 20px;
    }
    
    .hidden {
      display: none !important;
    }
    
    /* Order code badge */
    .order-code {
      display: inline-block;
      background: #000;
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 10px;
    }
    
    /* Ad Banner */
    .ad-banner {
      width: 100%;
      height: 200px;
      margin-bottom: 40px;
      border-radius: 10px;
      overflow: hidden;
    }
    
    .ad-banner img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    /* FAQ Section */
    .faq-section {
      padding: 60px 0;
      background: #f9f9f9;
    }
    
    .faq-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .faq-title {
      text-align: center;
      font-size: 32px;
      font-weight: 700;
      text-transform: uppercase;
      margin-bottom: 40px;
    }
    
    .faq-item {
      background: white;
      border-radius: 8px;
      margin-bottom: 15px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .faq-question {
      padding: 20px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background 0.3s;
    }
    
    .faq-question:hover {
      background: #f5f5f5;
    }
    
    .faq-question i {
      transition: transform 0.3s;
    }
    
    .faq-item.active .faq-question i {
      transform: rotate(180deg);
    }
    
    .faq-answer {
      padding: 0 20px;
      max-height: 0;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .faq-item.active .faq-answer {
      padding: 0 20px 20px;
      max-height: 300px;
    }
    
    /* Footer */
    footer {
      background: #000;
      color: white;
      padding: 60px 0 30px;
    }
    
    .footer-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 40px;
      margin-bottom: 40px;
    }
    
    .footer-column h3 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      text-transform: uppercase;
    }
    
    .footer-column p {
      margin-bottom: 15px;
      line-height: 1.6;
    }
    
    .social-icons {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }
    
    .social-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .social-icon:hover {
      background: white;
      color: #000;
      transform: translateY(-3px);
    }
    
    .newsletter-form {
      display: flex;
      margin-top: 15px;
      flex-wrap: wrap;
    }
    
    .newsletter-input {
      flex: 1;
      padding: 12px 15px;
      border: none;
      border-radius: 4px 0 0 4px;
      font-family: 'Poppins', sans-serif;
      min-width: 200px;
      box-sizing: border-box;
    }
    
    .newsletter-btn {
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 0 20px;
      border-radius: 0 4px 4px 0;
      cursor: pointer;
      transition: background 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .newsletter-btn:hover {
      background: #ff5252;
    }
    
    .footer-bottom {
      text-align: center;
      padding-top: 30px;
      border-top: 1px solid rgba(255,255,255,0.1);
      font-size: 14px;
    }
    
    /* Notification permission banner */
    .notification-banner {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: #333;
      color: white;
      padding: 15px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 90;
      display: flex;
      align-items: center;
      gap: 15px;
      max-width: 350px;
      transform: translateY(150%);
      transition: transform 0.3s ease;
    }
    
    .notification-banner.show {
      transform: translateY(0);
    }
    
    .notification-banner-text {
      flex: 1;
      font-size: 14px;
      line-height: 1.4;
    }
    
    .notification-banner-buttons {
      display: flex;
      gap: 10px;
    }
    
    .notification-btn {
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      transition: background 0.2s;
    }
    
    .notification-btn:hover {
      background: rgba(255,255,255,0.3);
    }
    
    .notification-btn.allow {
      background: #4caf50;
    }
    
    .notification-btn.allow:hover {
      background: #45a049;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .sidebar {
        width: 280px;
        right: -280px;
      }
      
      .payment-page {
        height: 90vh;
      }
      
      .payment-container {
        padding: 0 15px 15px;
      }
      
      .payment-title {
        font-size: 20px;
      }
      
      .delivery-options {
        flex-direction: column;
        gap: 10px;
      }
      
      .floating-icons {
        top: 1rem;
        right: 1rem;
      }
      
      .floating-icon {
        width: 45px;
        height: 45px;
      }
      
      .hero-section h1 {
        font-size: 2.5rem !important;
      }
      
      .hero-section p {
        font-size: 1rem !important;
      }
      
      .footer-content {
        grid-template-columns: 1fr;
        gap: 30px;
      }
      
      .notification-banner {
        left: 10px;
        right: 10px;
        max-width: none;
      }
      
      .ad-banner {
        height: 150px;
      }
    }
    
    @media (max-width: 480px) {
      .varian-card {
        width: 110px;
      }
      
      .varian-card img {
        height: 80px;
      }
      
      .box-btn {
        padding: 12px 8px;
        font-size: 14px;
      }
      
      .box-btn i {
        font-size: 18px;
      }
      
      .donut-slot {
        width: 40px;
        height: 40px;
      }
      
      #donutGrid {
        grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
        gap: 8px;
      }
      
      .faq-title {
        font-size: 24px;
      }
      
      .newsletter-form {
        flex-direction: column;
      }
      
      .newsletter-input {
        border-radius: 4px;
        margin-bottom: 10px;
        width: 100%;
      }
      
      .newsletter-btn {
        border-radius: 4px;
        padding: 12px;
        width: 100%;
      }
      
      .ad-banner {
        height: 120px;
      }
    }
    
    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }
  </style>
</head>
<body>

  <!-- Floating Icons (kanan atas, sejajar) -->
  <div id="floatingIcons" class="floating-icons">
    <div onclick="toggleRecent()" class="floating-icon">
      <i class="fas fa-clock-rotate-left"></i>
    </div>
    <div onclick="toggleCart()" class="floating-icon">
      <i class="fas fa-shopping-cart"></i>
      <span id="cartBadge" class="badge" style="display: none;">0</span>
    </div>
  </div>

  <!-- Hero Section -->
  <section class="w-full h-screen relative flex items-center justify-center hero-section">
    <img src="https://media4.giphy.com/media/v1.Y2lkPTZjMDliOTUycGV5ZXN3b2MzZnY4and6dHN1dWtvdmZtZmp0dDRnZGh6MnNkZGE1ZSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/bd4td7PlhYY9i/giphy.gif" class="absolute inset-0 w-full h-full object-cover" alt="Hero Donut" />
    <div class="absolute inset-0 bg-white/80"></div>
    <div class="relative text-center px-4">
      <h1 class="text-5xl md:text-6xl font-bold uppercase tracking-widest mb-4">Donuts mama</h1>
      <p class="text-lg md:text-xl">Harga Hemat Rasa Mewah</p>
      <div class="mt-8 flex justify-center">
        <a href="#content" onclick="scrollToContent(event)" class="inline-block border-2 border-black px-8 py-3 font-medium uppercase hover:bg-black hover:text-white transition">
          Mulai Pesan <i class="fas fa-arrow-down ml-2"></i>
        </a>
      </div>
    </div>
  </section>

  <!-- Konten -->
  <main id="content" class="w-full max-w-4xl mx-auto p-6">
    <div class="h-20"></div>

    <!-- Box Selection -->
    <h2 class="text-2xl font-semibold uppercase mb-6 flex items-center">
      <i class="fas fa-box-open mr-3"></i> Pilih Ukuran Box
    </h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-12">
      <button onclick="selectBox('mini',6,2000)" class="box-btn py-5 font-bold border-2 border-black uppercase transition">
        <i class="fas fa-box mb-2 block text-xl"></i> Mini (6 pcs)
        <div class="text-sm font-normal mt-1">Rp 2.000</div>
      </button>
      <button onclick="selectBox('medium',12,3500)" class="box-btn py-5 font-bold border-2 border-black uppercase transition">
        <i class="fas fa-box mb-2 block text-xl"></i> Medium (12 pcs)
        <div class="text-sm font-normal mt-1">Rp 3.500</div>
      </button>
      <button onclick="selectBox('big',24,6000)" class="box-btn py-5 font-bold border-2 border-black uppercase transition">
        <i class="fas fa-box mb-2 block text-xl"></i> Big (24 pcs)
        <div class="text-sm font-normal mt-1">Rp 6.000</div>
      </button>
      <button onclick="selectBox('party',48,11000)" class="box-btn py-5 font-bold border-2 border-black uppercase transition">
        <i class="fas fa-box mb-2 block text-xl"></i> Party (48 pcs)
        <div class="text-sm font-normal mt-1">Rp 11.000</div>
      </button>
    </div>

    <!-- Search -->
    <div class="search-container autocomplete-container">
      <i class="fas fa-search"></i>
      <input type="text" id="searchInput" oninput="filterVariants()" placeholder="Cari varian donat..." class="w-full py-3 px-4 border rounded-full text-sm uppercase">
      <div id="autocompleteList" class="autocomplete-items"></div>
    </div>

    <!-- Varian Donat -->
    <h2 class="text-2xl font-semibold uppercase mb-6 flex items-center">
      <i class="fas fa-cookie-bite mr-3"></i> Pilih Varian Donat
    </h2>
    <div id="varianList" class="scroll-x flex gap-5 mb-12 pb-4">
      <div onclick="addVarian('Coklat')" class="varian-card" data-name="Coklat">
        <img src="https://i.ibb.co.com/KpyhvGM6/snowmactha.webp" class="w-full object-cover" />
        <p class="text-center mt-3 text-sm uppercase font-medium">Snow Matcha</p>
      </div>
      <div onclick="addVarian('Strawberry')" class="varian-card" data-name="Strawberry">
        <img src="https://i.ibb.co.com/bjnCf5rg/snowwhite.jpg" class="w-full object-cover" />
        <p class="text-center mt-3 text-sm uppercase font-medium">Snow White</p>
      </div>
      <div onclick="addVarian('Matcha')" class="varian-card" data-name="Matcha">
        <img src="https://i.ibb.co.com/27b2X956/blackcover.jpg" class="w-full object-cover" />
        <p class="text-center mt-3 text-sm uppercase font-medium">Black Moon</p>
      </div>
      <div onclick="addVarian('Vanilla')" class="varian-card" data-name="Vanilla">
        <img src="https://i.ibb.co.com/cXx4p0KG/images-18.jpg" class="w-full object-cover" />
        <p class="text-center mt-3 text-sm uppercase font-medium">Black Cover</p>
      </div>
      <div onclick="addVarian('Blueberry')" class="varian-card" data-name="Blueberry">
        <img src="https://i.ibb.co.com/Vsd8nJ4/snowcheese.jpg" class="w-full object-cover" />
        <p class="text-center mt-3 text-sm uppercase font-medium">Snow Cheese</p>
      </div>
      <div onclick="addVarian('Caramel')" class="varian-card" data-name="Caramel">
        <img src="https://i.ibb.co.com/S7MZ6yTW/blackalmond.jpg" class="w-full object-cover" />
        <p class="text-center mt-3 text-sm uppercase font-medium">Black Almond</p>
      </div>
      <div onclick="addVarian('Red Velvet')" class="varian-card" data-name="Red Velvet">
        <img src="https://i.ibb.co.com/TBYYGPkj/redvelvet.jpg" class="w-full object-cover" />
        <p class="text-center mt-3 text-sm uppercase font-medium">Red Velvet</p>
      </div>
      <div onclick="addVarian('Strawberry Smooth')" class="varian-card" data-name="Strawberry Smooth">
        <img src="https://i.ibb.co.com/tTCFXBxP/strawberrysmooth.jpg" class="w-full object-cover" />
        <p class="text-center mt-3 text-sm uppercase font-medium">Strawberry Smooth</p>
      </div>
    </div>

    <!-- Box Display -->
    <div id="boxDisplay" class="text-center mb-12 hidden">
      <h3 class="text-2xl font-semibold uppercase mb-6 flex items-center justify-center">
        <i class="fas fa-box mr-3"></i> Isi Box Donat
      </h3>
      <div id="donutGrid" class="mb-6"></div>
      <p id="slotInfo" class="text-lg uppercase mb-6"></p>
      <div class="flex flex-col sm:flex-row justify-center gap-4">
        <button id="addCartBtn" onclick="addToCart()" class="border-2 border-black px-8 py-4 font-bold uppercase hover:bg-black hover:text-white transition">
          <i class="fas fa-cart-plus mr-2"></i> Tambah ke Keranjang
        </button>
        <button id="payNowBtn" onclick="goToPayment()" class="bg-black text-white px-8 py-4 font-bold uppercase hover:bg-gray-800 transition">
          <i class="fas fa-credit-card mr-2"></i> Bayar Sekarang
        </button>
      </div>
    </div>
  </main>

  <!-- Ad Banner -->
  <section class="w-full max-w-6xl mx-auto px-6 mb-10">
    <div class="ad-banner">
      <img src="https://media2.giphy.com/media/v1.Y2lkPTZjMDliOTUyMWJkancwaXNrejB0emhnajAxOHVldXRobWFjcDlnZWgwcW9zd3c4bCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/gpZsmrh1eXUXK/giphy.gif" alt="Promo Banner" />
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq-section">
    <div class="faq-container">
      <h2 class="faq-title">Frequently Asked Questions</h2>
      
      <div class="faq-item">
        <div class="faq-question" onclick="toggleFaq(this)">
          <span>Bagaimana cara memesan donut di SweetBox?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-answer">
          <p>Cara memesan donut di SweetBox sangat mudah. Pilih ukuran box yang Anda inginkan, lalu pilih varian donat sesuai selera. Setiap varian donut memiliki harga Rp 5.500. Setelah box terisi penuh, Anda bisa menambahkannya ke keranjang atau langsung melakukan pembayaran.</p>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" onclick="toggleFaq(this)">
          <span>Apakah bisa mengirim ke luar kota?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-answer">
          <p>Saat ini kami hanya melayani pengiriman di area Cipanas dan sekitarnya. Untuk daerah pengiriman yang tersedia, Anda bisa memilih opsi delivery saat checkout dan melihat daftar yang tersedia.</p>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" onclick="toggleFaq(this)">
          <span>Berapa lama pesanan akan diproses?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-answer">
          <p>Pesanan akan diproses dalam 1-2 jam setelah pembayaran dikonfirmasi. Untuk pesanan dalam jumlah besar (party box), mungkin memerlukan waktu lebih lama.</p>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" onclick="toggleFaq(this)">
          <span>Apakah bisa mengambil pesanan di toko?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-answer">
          <p>Tentu saja! Kami menyediakan opsi ambil di tempat. Anda bisa memilih opsi "Ambil di Tempat" saat checkout dan kami akan siapkan pesanan Anda di toko kami.</p>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" onclick="toggleFaq(this)">
          <span>Bagaimana cara pembayarannya?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-answer">
          <p>Kami menerima pembayaran melalui transfer bank dan pembayaran langsung di toko. Setelah Anda melakukan pemesanan, kami akan mengirimkan detail pembayaran melalui WhatsApp.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-column">
          <h3>Tentang SweetBox</h3>
          <p>SweetBox Donuts adalah toko donut premium di Cipanas yang menyediakan berbagai varian donat dengan harga terjangkau mulai dari Rp 5.500 per varian. Kami berkomitmen untuk memberikan pengalaman berbelanja yang menyenangkan dan memuaskan bagi pelanggan.</p>
          <div class="social-icons">
            <a href="#" class="social-icon">
              <i class="fab fa-whatsapp"></i>
            </a>
            <a href="#" class="social-icon">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="#" class="social-icon">
              <i class="fab fa-facebook-f"></i>
            </a>
          </div>
        </div>
        
        <div class="footer-column">
          <h3>Hubungi Kami</h3>
          <p><i class="fas fa-map-marker-alt mr-2"></i> Kp.Pasir luhur,Des.Benjot, Kec.Cugenang, Kab.Cianjur</p>
          <p><i class="fas fa-phone mr-2"></i> +6285617377589</p>
          <p><i class="fas fa-envelope mr-2"></i> sobathustle.co@gmail.com</p>
          <p><i class="fas fa-clock mr-2"></i> Jam Buka: 08:00 - 21:00 WIB</p>
        </div>
        
        <div class="footer-column">
          <h3>Newsletter</h3>
          <p>Dapatkan penawaran terbaru dan informasi promo menarik dari kami dengan berlangganan newsletter.</p>
          <form class="newsletter-form" onsubmit="subscribeNewsletter(event)">
            <input type="email" class="newsletter-input" placeholder="Email Anda" required>
            <button type="submit" class="newsletter-btn">
              <i class="fas fa-paper-plane"></i>
            </button>
          </form>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2023 SweetBox Donuts. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Notification Permission Banner -->
  <div id="notificationBanner" class="notification-banner">
    <div class="notification-banner-text">
      Aktifkan notifikasi untuk mendapatkan informasi promo terbaru dari SweetBox Donuts!
    </div>
    <div class="notification-banner-buttons">
      <button class="notification-btn" onclick="dismissNotificationBanner()">Nanti</button>
      <button class="notification-btn allow" onclick="requestNotificationPermission()">Aktifkan</button>
    </div>
  </div>

  <!-- Sidebar Recent -->
  <aside id="recentSidebar" class="sidebar">
    <div class="sidebar-header">
      <h2 class="text-xl font-bold uppercase flex items-center">
        <i class="fas fa-clock-rotate-left mr-2"></i> Pesanan Terakhir
      </h2>
      <div onclick="toggleRecent()" class="close-sidebar">
        <i class="fas fa-times"></i>
      </div>
    </div>
    <div id="recentList" class="flex-1 overflow-y-auto">
      <div class="empty-state">
        <i class="fas fa-receipt"></i>
        <p>Belum ada pesanan</p>
      </div>
    </div>
  </aside>

  <!-- Sidebar Keranjang -->
  <aside id="cartSidebar" class="sidebar">
    <div class="sidebar-header">
      <h2 class="text-xl font-bold uppercase flex items-center">
        <i class="fas fa-shopping-cart mr-2"></i> Keranjang
      </h2>
      <div onclick="toggleCart()" class="close-sidebar">
        <i class="fas fa-times"></i>
      </div>
    </div>
    <div id="cartList" class="flex-1 overflow-y-auto">
      <div class="empty-state">
        <i class="fas fa-shopping-basket"></i>
        <p>Keranjang kosong</p>
      </div>
    </div>
    <div id="cartTotal" class="pt-4 border-t border-gray-200 mb-4 hidden">
      <div class="flex justify-between font-semibold text-lg">
        <span>Total:</span>
        <span id="totalAmount">Rp 0</span>
      </div>
    </div>
    <button onclick="checkoutCart()" class="btn-payment w-full">
      <i class="fas fa-credit-card mr-2"></i> Bayar Sekarang
    </button>
  </aside>

  <!-- Payment Page - Swipe Up Style -->
  <div id="paymentPage" class="payment-page">
    <div class="payment-handle"></div>
    <div class="payment-container">
      <div class="payment-header">
        <h2 class="payment-title">Pembayaran</h2>
        <div onclick="closePayment()" class="close-payment">
          <i class="fas fa-times"></i>
        </div>
      </div>
      
      <form id="paymentForm">
        <!-- Order Code -->
        <div class="payment-section">
          <div class="order-code" id="orderCode">
            Kode Pesanan: #SWT-00000
          </div>
        </div>
        
        <!-- Order Summary -->
        <div class="payment-section">
          <h3 class="payment-section-title">
            <i class="fas fa-receipt"></i> Ringkasan Pesanan
          </h3>
          <div class="order-summary">
            <div id="orderItems"></div>
            <div class="order-total">
              <span>Total:</span>
              <span id="orderTotal">Rp 0</span>
            </div>
          </div>
        </div>
        
        <!-- Customer Information -->
        <div class="payment-section">
          <h3 class="payment-section-title">
            <i class="fas fa-user"></i> Informasi Pelanggan
          </h3>
          <div class="form-group">
            <label class="form-label">Nama Lengkap</label>
            <input type="text" id="customerName" class="form-input" required>
          </div>
          <div class="form-group">
            <label class="form-label">Kontak (WhatsApp)</label>
            <input type="tel" id="customerContact" class="form-input" placeholder="08*****" required>
          </div>
          <div class="form-group">
            <label class="form-label">Alamat Lengkap</label>
            <textarea id="customerAddress" class="form-textarea" required></textarea>
          </div>
        </div>
        
        <!-- Delivery Options -->
        <div class="payment-section">
          <h3 class="payment-section-title">
            <i class="fas fa-truck"></i> Opsi Pengiriman
          </h3>
          <div class="delivery-options">
            <div class="delivery-option" onclick="selectDelivery('delivery')">
              <i class="fas fa-motorcycle"></i>
              <div>Delivery</div>
            </div>
            <div class="delivery-option" onclick="selectDelivery('pickup')">
              <i class="fas fa-store"></i>
              <div>Ambil di Tempat</div>
            </div>
          </div>
          
          <!-- Delivery Areas -->
          <div id="deliveryArea" class="delivery-area">
            <div class="form-group">
              <label class="form-label">Pilih Daerah Pengiriman</label>
              <select id="deliveryRegion" class="form-select" onchange="updateDeliveryFee()">
                <option value="">-- Pilih Daerah --</option>
                <option value="cipanas" data-fee="20000">Cipanas - Rp 20.000</option>
                <option value="cianjur-kota" data-fee="15000">Cianjur Kota - Rp 15.000</option>
                <option value="warung-kondang" data-fee="20000">Warung Kondang - Rp 20.000</option>
                <option value="cugenang" data-fee="15000">Cugenang - Rp 15.000</option>
                <option value="ciranjang" data-fee="30000">Ciranjang - Rp 30.000</option>
                <option value="cibeber" data-fee="20000">Cibeber - Rp 20.000</option>
                <option value="sukaluyu" data-fee="20000">Sukaluyu - Rp 40.000</option>
                <option value="karang-tengah" data-fee="15000">Karang Tengah - Rp 15.000</option>
              </select>
            </div>
          </div>
          
          <!-- Pickup Information -->
          <div id="pickupInfo" class="pickup-info">
            <h4 class="font-semibold mb-2">Lokasi Pengambilan</h4>
            <p><strong>SweetBox Donuts</strong></p>
            <p>Kp.Pasir luhur, Des.Benjot, Kec.Cugenang, Kab.Cianjur.</p>
            <p class="mt-2">Jam Buka: 08:00 - 21:00 WIB</p>
          </div>
        </div>
        
        <!-- Submit Button -->
        <button type="submit" class="whatsapp-btn">
          <i class="fab fa-whatsapp"></i> Bayar Sekarang 
        </button>
      </form>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast"></div>

  <script>
    // Register Service Worker for Caching
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('data:text/javascript;base64,' + btoa(`
          const CACHE_NAME = 'sweetbox-cache-v1';
          const urlsToCache = [
            '/',
            'https://media.giphy.com/media/TjA6EnT2k0v1C/giphy.gif',
            'https://i.ibb.co.com/KpyhvGM6/snowmactha.webp',
            'https://i.ibb.co.com/bjnCf5rg/snowwhite.jpg',
            'https://i.ibb.co.com/27b2X956/blackcover.jpg',
            'https://i.ibb.co.com/Vsd8nJ4/snowcheese.jpg',
            'https://i.ibb.co.com/S7MZ6yTW/blackalmond.jpg',
            'https://i.ibb.co.com/TBYYGPkj/redvelvet.jpg',
            'https://i.ibb.co.com/tTCFXBxP/strawberrysmooth.jpg',
            'https://images.unsplash.com/photo-1591799264318-7e6ef8ddb7ea?w=300&q=80',
            'https://i.imgur.com/7Yn5fUH.png'
          ];
          
          self.addEventListener('install', event => {
            event.waitUntil(
              caches.open(CACHE_NAME)
                .then(cache => cache.addAll(urlsToCache))
            );
          });
          
          self.addEventListener('fetch', event => {
            event.respondWith(
              caches.match(event.request)
                .then(response => {
                  return response || fetch(event.request);
                })
            );
          });
        `))
        .then(registration => {
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        })
        .catch(error => {
          console.log('ServiceWorker registration failed: ', error);
        });
      });
    }

    // Check for notification permission and show banner if not granted
    function checkNotificationPermission() {
      if ('Notification' in window && Notification.permission === 'default') {
        setTimeout(() => {
          document.getElementById('notificationBanner').classList.add('show');
        }, 3000);
      }
    }

    // Request notification permission
    function requestNotificationPermission() {
      if ('Notification' in window) {
        Notification.requestPermission().then(permission => {
          if (permission === 'granted') {
            showToast('Notifikasi telah diaktifkan!', 'success');
            dismissNotificationBanner();
            
            // Subscribe to push notifications
            subscribeToPushNotifications();
          } else {
            showToast('Anda menolak notifikasi', 'info');
          }
        });
      } else {
        showToast('Browser Anda tidak mendukung notifikasi', 'error');
      }
    }

    // Dismiss notification banner
    function dismissNotificationBanner() {
      document.getElementById('notificationBanner').classList.remove('show');
    }

    // Subscribe to push notifications
    function subscribeToPushNotifications() {
      if ('serviceWorker' in navigator && 'PushManager' in window) {
        navigator.serviceWorker.ready.then(registration => {
          registration.pushManager.subscribe({
            userVisibleOnly: true,
            applicationServerKey: urlBase64ToUint8Array('BEl62iUYgUivxIkv69yViEuiBIa-Ib7-SkvE4uN0pOHoBFZ63sVn_SkXYT7XlFFqy1tUsFg1Ow2g7SdW_VMCd3')
          })
          .then(subscription => {
            console.log('Push subscription successful:', subscription);
            // In a real app, you would send this subscription to your server
          })
          .catch(error => {
            console.error('Push subscription failed:', error);
          });
        });
      }
    }

    // Helper function for VAPID key
    function urlBase64ToUint8Array(base64String) {
      const padding = '='.repeat((4 - base64String.length % 4) % 4);
      const base64 = (base64String + padding)
        .replace(/-/g, '+')
        .replace(/_/g, '/');
      
      const rawData = window.atob(base64);
      const outputArray = new Uint8Array(rawData.length);
      
      for (let i = 0; i < rawData.length; ++i) {
        outputArray[i] = rawData.charCodeAt(i);
      }
      
      return outputArray;
    }

    // Send a test notification
    function sendNotification(title, options = {}) {
      if ('Notification' in window && Notification.permission === 'granted') {
        new Notification(title, {
          body: options.body || '',
          icon: options.icon || 'https://i.imgur.com/7Yn5fUH.png',
          badge: options.badge || 'https://i.imgur.com/7Yn5fUH.png',
          tag: options.tag || 'sweetbox-notification'
        });
      }
    }

    let box = { type: null, slots: 0, harga: 0, isi: [] };
    let cart = [];
    let recent = [];
    let deliveryFee = 0;
    let deliveryType = '';
    let orderCode = '';
    const VARIANT_PRICE = 5500; // Harga per varian donut
    
    // Available variants for autocomplete
    const variants = ['Coklat', 'Strawberry', 'Matcha', 'Vanilla', 'Blueberry', 'Caramel', 'Red Velvet', 'Strawberry Smooth'];

    // Generate unique order code
    function generateOrderCode() {
      const prefix = 'SWT';
      const timestamp = Date.now().toString().slice(-5);
      orderCode = `${prefix}-${timestamp}`;
      return orderCode;
    }

    function selectBox(type, slots, harga) {
      box = { type, slots, harga, isi: [] };
      document.querySelectorAll('.box-btn').forEach(btn => btn.classList.remove('active'));
      event.target.closest('.box-btn').classList.add('active');
      document.getElementById('boxDisplay').classList.remove('hidden');
      updateDisplay();
    }

    function addVarian(varian) {
      if (!box.type) {
        showToast("Pilih ukuran box dulu.", "warning");
        return;
      }
      if (box.isi.length >= box.slots) {
        showToast("Box sudah penuh!", "error");
        return;
      }
      box.isi.push(varian);
      updateDisplay();
      
      // Visual feedback
      const card = document.querySelector(`[data-name="${varian}"]`);
      if (card) {
        card.style.transform = 'scale(0.95)';
        setTimeout(() => {
          card.style.transform = '';
        }, 200);
      }
    }

    function removeVarian(i) {
      box.isi.splice(i, 1);
      updateDisplay();
    }

    function updateDisplay() {
      const grid = document.getElementById('donutGrid');
      grid.innerHTML = '';
      
      // Create filled slots
      box.isi.forEach((v, i) => {
        const div = document.createElement('div');
        div.className = "donut-slot filled cursor-pointer";
        div.title = v;
        div.onclick = () => removeVarian(i);
        grid.appendChild(div);
      });
      
      // Create empty slots
      const sisa = box.slots - box.isi.length;
      for (let i = 0; i < sisa; i++) {
        const div = document.createElement('div');
        div.className = "donut-slot";
        grid.appendChild(div);
      }
      
      document.getElementById('slotInfo').innerText = `${box.isi.length}/${box.slots} terisi`;
      document.getElementById('addCartBtn').classList.toggle('hidden', sisa !== 0);
      document.getElementById('payNowBtn').classList.toggle('hidden', sisa !== 0);
    }

    function addToCart() {
      cart.push({ ...box });
      box = { type: null, slots: 0, harga: 0, isi: [] };
      updateCart();
      updateCartBadge();
      showToast("Box ditambahkan ke keranjang!", "success");
      document.getElementById('boxDisplay').classList.add('hidden');
      document.querySelectorAll('.box-btn').forEach(btn => btn.classList.remove('active'));
      
      // Send notification if permission granted
      sendNotification('Item Ditambahkan', {
        body: 'Box donut berhasil ditambahkan ke keranjang Anda.',
        icon: 'https://i.imgur.com/7Yn5fUH.png'
      });
    }

    function updateCart() {
      const list = document.getElementById('cartList');
      const totalElement = document.getElementById('cartTotal');
      
      if (cart.length === 0) {
        list.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-shopping-basket"></i>
            <p>Keranjang kosong</p>
          </div>
        `;
        totalElement.classList.add('hidden');
        return;
      }
      
      list.innerHTML = '';
      let total = 0;
      
      cart.forEach((b, i) => {
        // Hitung total harga box + harga varian
        const boxPrice = b.harga;
        const variantPrice = b.isi.length * VARIANT_PRICE;
        const totalPrice = boxPrice + variantPrice;
        total += totalPrice;
        
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <div class="cart-item-header">
            <span class="cart-item-name">${b.type} (${b.slots} pcs)</span>
            <span class="cart-item-price">Rp ${totalPrice.toLocaleString()}</span>
          </div>
          <div class="cart-item-content">${b.isi.join(', ')}</div>
          <div class="cart-item-actions">
            <button onclick="removeCart(${i})" class="btn-remove">
              <i class="fas fa-trash-alt mr-1"></i> Hapus
            </button>
          </div>
        `;
        list.appendChild(div);
      });
      
      document.getElementById('totalAmount').innerText = `Rp ${total.toLocaleString()}`;
      totalElement.classList.remove('hidden');
    }

    function removeCart(i) {
      cart.splice(i, 1);
      updateCart();
      updateCartBadge();
      showToast("Item dihapus dari keranjang", "info");
    }

    function updateCartBadge() {
      const badge = document.getElementById('cartBadge');
      if (cart.length > 0) {
        badge.textContent = cart.length;
        badge.style.display = 'flex';
      } else {
        badge.style.display = 'none';
      }
    }

    function checkoutCart() {
      if (cart.length === 0) {
        showToast("Keranjang kosong!", "error");
        return;
      }
      
      recent.push(...cart);
      cart = [];
      updateCart();
      updateRecent();
      updateCartBadge();
      showToast("Pesanan berhasil disimpan!", "success");
      toggleCart();
      
      // Send notification if permission granted
      sendNotification('Pesanan Berhasil', {
        body: 'Pesanan Anda telah berhasil disimpan dan akan segera diproses.',
        icon: 'https://i.imgur.com/7Yn5fUH.png'
      });
    }

    function updateRecent() {
      const list = document.getElementById('recentList');
      
      if (recent.length === 0) {
        list.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-receipt"></i>
            <p>Belum ada pesanan</p>
          </div>
        `;
        return;
      }
      
      list.innerHTML = '';
      recent.forEach((b, i) => {
        // Hitung total harga box + harga varian
        const boxPrice = b.harga;
        const variantPrice = b.isi.length * VARIANT_PRICE;
        const totalPrice = boxPrice + variantPrice;
        
        const div = document.createElement('div');
        div.className = 'recent-item';
        div.innerHTML = `
          <div class="recent-item-header">
            <span class="recent-item-name">${b.type} (${b.slots} pcs)</span>
            <span class="recent-item-price">Rp ${totalPrice.toLocaleString()}</span>
          </div>
          <div class="recent-item-content">${b.isi.join(', ')}</div>
          <div class="recent-item-actions">
            <button onclick="buyRecent(${i})" class="btn-buy">
              <i class="fas fa-shopping-cart mr-1"></i> Beli Lagi
            </button>
          </div>
        `;
        list.appendChild(div);
      });
    }
    
    function buyRecent(index) {
      const item = recent[index];
      box = { ...item };
      document.getElementById('boxDisplay').classList.remove('hidden');
      updateDisplay();
      toggleRecent();
      showToast("Pesanan ditambahkan kembali!", "success");
      
      // Scroll to box display
      document.getElementById('boxDisplay').scrollIntoView({ behavior: 'smooth' });
    }

    function toggleCart() {
      const cartSidebar = document.getElementById('cartSidebar');
      const floatingIcons = document.getElementById('floatingIcons');
      
      cartSidebar.classList.toggle('open');
      
      if (cartSidebar.classList.contains('open')) {
        floatingIcons.style.opacity = '0';
        floatingIcons.style.visibility = 'hidden';
      } else {
        floatingIcons.style.opacity = '1';
        floatingIcons.style.visibility = 'visible';
      }
    }

    function toggleRecent() {
      const recentSidebar = document.getElementById('recentSidebar');
      const floatingIcons = document.getElementById('floatingIcons');
      
      recentSidebar.classList.toggle('open');
      
      if (recentSidebar.classList.contains('open')) {
        floatingIcons.style.opacity = '0';
        floatingIcons.style.visibility = 'hidden';
      } else {
        floatingIcons.style.opacity = '1';
        floatingIcons.style.visibility = 'visible';
      }
    }

    function filterVariants() {
      const q = document.getElementById('searchInput').value.toLowerCase();
      const autocompleteList = document.getElementById('autocompleteList');
      
      // Clear previous autocomplete
      autocompleteList.innerHTML = '';
      
      if (q.length === 0) {
        document.querySelectorAll('.varian-card').forEach(c => {
          c.style.display = 'block';
        });
        return;
      }
      
      // Filter variants
      const filteredVariants = variants.filter(v => v.toLowerCase().includes(q));
      
      // Show autocomplete suggestions
      if (filteredVariants.length > 0) {
        filteredVariants.forEach(v => {
          const item = document.createElement('div');
          item.className = 'autocomplete-item';
          item.textContent = v;
          item.onclick = () => {
            document.getElementById('searchInput').value = v;
            autocompleteList.innerHTML = '';
            highlightVariant(v);
          };
          autocompleteList.appendChild(item);
        });
      }
      
      // Highlight matching variants
      document.querySelectorAll('.varian-card').forEach(c => {
        const name = c.getAttribute('data-name');
        if (name.toLowerCase().includes(q)) {
          c.style.display = 'block';
        } else {
          c.style.display = 'none';
        }
      });
    }
    
    function highlightVariant(variantName) {
      const card = document.querySelector(`[data-name="${variantName}"]`);
      if (card) {
        card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        card.style.border = '2px solid #ff6b6b';
        setTimeout(() => {
          card.style.border = '';
        }, 1500);
      }
    }

    function showToast(message, type = 'info') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      
      // Set color based on type
      switch(type) {
        case 'success':
          toast.style.background = '#4caf50';
          break;
        case 'error':
          toast.style.background = '#f44336';
          break;
        case 'warning':
          toast.style.background = '#ff9800';
          break;
        default:
          toast.style.background = '#333';
      }
      
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Auto scroll to content
    function scrollToContent(event) {
      event.preventDefault();
      document.getElementById('content').scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }

    // Payment functions
    function goToPayment() {
      if (!box.type || box.isi.length === 0) {
        showToast("Lengkapi box donut terlebih dahulu!", "warning");
        return;
      }
      
      // Generate order code
      generateOrderCode();
      document.getElementById('orderCode').textContent = `Kode Pesanan: ${orderCode}`;
      
      // Add current box to cart temporarily for payment
      const tempCart = [...cart, {...box}];
      updateOrderSummary(tempCart);
      
      // Reset delivery options
      document.querySelectorAll('.delivery-option').forEach(opt => opt.classList.remove('active'));
      document.getElementById('deliveryArea').classList.remove('active');
      document.getElementById('pickupInfo').classList.remove('active');
      deliveryType = '';
      deliveryFee = 0;
      
      document.getElementById('paymentPage').classList.add('active');
    }

    function closePayment() {
      document.getElementById('paymentPage').classList.remove('active');
    }

    function updateOrderSummary(cartItems) {
      const orderItems = document.getElementById('orderItems');
      const orderTotal = document.getElementById('orderTotal');
      
      orderItems.innerHTML = '';
      let total = 0;
      
      cartItems.forEach(item => {
        // Hitung harga box
        const boxPrice = item.harga;
        
        // Hitung harga varian
        const variantPrice = item.isi.length * VARIANT_PRICE;
        
        // Total harga untuk box ini
        const itemTotal = boxPrice + variantPrice;
        total += itemTotal;
        
        // Tambahkan item ke ringkasan
        const itemDiv = document.createElement('div');
        itemDiv.className = 'order-item';
        itemDiv.innerHTML = `
          <div>
            <span class="order-item-name">${item.type} Box (${item.slots} pcs)</span>
            <div style="font-size: 12px; color: #666; margin-top: 4px;">
              Box: Rp ${boxPrice.toLocaleString()} | ${item.isi.join(', ')} - ${item.isi.length} varian x Rp ${VARIANT_PRICE.toLocaleString()}
            </div>
          </div>
          <span class="order-item-price">Rp ${itemTotal.toLocaleString()}</span>
        `;
        orderItems.appendChild(itemDiv);
      });
      
      // Add delivery fee if applicable
      if (deliveryFee > 0) {
        const deliveryDiv = document.createElement('div');
        deliveryDiv.className = 'order-item';
        deliveryDiv.innerHTML = `
          <span class="order-item-name">Biaya Pengiriman</span>
          <span class="order-item-price">Rp ${deliveryFee.toLocaleString()}</span>
        `;
        orderItems.appendChild(deliveryDiv);
        total += deliveryFee;
      }
      
      orderTotal.textContent = `Rp ${total.toLocaleString()}`;
    }

    function selectDelivery(type) {
      deliveryType = type;
      
      // Update UI
      document.querySelectorAll('.delivery-option').forEach(opt => opt.classList.remove('active'));
      event.target.closest('.delivery-option').classList.add('active');
      
      // Show/hide appropriate sections
      if (type === 'delivery') {
        document.getElementById('deliveryArea').classList.add('active');
        document.getElementById('pickupInfo').classList.remove('active');
      } else {
        document.getElementById('deliveryArea').classList.remove('active');
        document.getElementById('pickupInfo').classList.add('active');
        deliveryFee = 0;
        updateOrderSummary([...cart, box]);
      }
    }

    function updateDeliveryFee() {
      const select = document.getElementById('deliveryRegion');
      const selectedOption = select.options[select.selectedIndex];
      
      if (selectedOption.value) {
        deliveryFee = parseInt(selectedOption.getAttribute('data-fee'));
        updateOrderSummary([...cart, box]);
      }
    }

    // Handle payment form submission
    document.getElementById('paymentForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const customerName = document.getElementById('customerName').value;
      const customerContact = document.getElementById('customerContact').value;
      const customerAddress = document.getElementById('customerAddress').value;
      
      if (!deliveryType) {
        showToast("Pilih opsi pengiriman!", "warning");
        return;
      }
      
      if (deliveryType === 'delivery' && !document.getElementById('deliveryRegion').value) {
        showToast("Pilih daerah pengiriman!", "warning");
        return;
      }
      
      // Prepare WhatsApp message
      let message = `*SWEETBOX DONUTS - PEMESANAN*\n\n`;
      message += `*Kode Pesanan:* ${orderCode}\n\n`;
      message += `*Data Pelanggan:*\n`;
      message += `Nama: ${customerName}\n`;
      message += `Kontak: ${customerContact}\n`;
      message += `Alamat: ${customerAddress}\n\n`;
      
      message += `*Detail Pesanan:*\n`;
      let total = 0;
      
      // Add box to cart if not already added
      if (box.type && box.isi.length > 0) {
        const tempCart = [...cart, {...box}];
        
        tempCart.forEach(item => {
          const boxPrice = item.harga;
          const variantPrice = item.isi.length * VARIANT_PRICE;
          const itemTotal = boxPrice + variantPrice;
          total += itemTotal;
          
          message += `- ${item.type} Box (${item.slots} pcs): ${item.isi.join(', ')}\n`;
          message += `  Harga Box: Rp ${boxPrice.toLocaleString()}\n`;
          message += `  Harga Varian (${item.isi.length} pcs x Rp ${VARIANT_PRICE.toLocaleString()}): Rp ${variantPrice.toLocaleString()}\n`;
          message += `  Subtotal: Rp ${itemTotal.toLocaleString()}\n\n`;
        });
      } else {
        cart.forEach(item => {
          const boxPrice = item.harga;
          const variantPrice = item.isi.length * VARIANT_PRICE;
          const itemTotal = boxPrice + variantPrice;
          total += itemTotal;
          
          message += `- ${item.type} Box (${item.slots} pcs): ${item.isi.join(', ')}\n`;
          message += `  Harga Box: Rp ${boxPrice.toLocaleString()}\n`;
          message += `  Harga Varian (${item.isi.length} pcs x Rp ${VARIANT_PRICE.toLocaleString()}): Rp ${variantPrice.toLocaleString()}\n`;
          message += `  Subtotal: Rp ${itemTotal.toLocaleString()}\n\n`;
        });
      }
      
      // Add delivery info
      if (deliveryType === 'delivery') {
        const regionSelect = document.getElementById('deliveryRegion');
        const regionName = regionSelect.options[regionSelect.selectedIndex].text;
        message += `*Pengiriman:*\n`;
        message += `Jenis: Delivery\n`;
        message += `Daerah: ${regionName}\n`;
        message += `Biaya: Rp ${deliveryFee.toLocaleString()}\n`;
        total += deliveryFee;
      } else {
        message += `*Pengambilan:*\n`;
        message += `Jenis: Ambil di Tempat\n`;
        message += `Lokasi: Donuts mama, Kp.Pasir luhur, Des.Benjot, Kec.Cugenang, Kab.Cianjur.\n`;
      }
      
      message += `\n*Total Pembayaran: Rp ${total.toLocaleString()}*\n\n`;
      message += `Mohon informasikan ketersediaan dan total pembayaran yang harus ditransfer. Terima kasih.`;
      
      // Encode message for URL
      const encodedMessage = encodeURIComponent(message);
      
      // Open WhatsApp with pre-filled message
      window.open(`https://wa.me/6285617377589?text=${encodedMessage}`, '_blank');
      
      // Close payment page and reset
      closePayment();
      
      // Add to cart if not already added
      if (box.type && box.isi.length > 0) {
        addToCart();
      }
      
      // Send notification if permission granted
      sendNotification('Pembayaran Berhasil', {
        body: 'Pesanan Anda telah berhasil dikirim ke WhatsApp admin.',
        icon: 'https://i.imgur.com/7Yn5fUH.png'
      });
      
      showToast("Pesanan telah dikirim ke WhatsApp!", "success");
    });

    // FAQ toggle function
    function toggleFaq(element) {
      const faqItem = element.parentElement;
      faqItem.classList.toggle('active');
    }

    // Newsletter subscription
    function subscribeNewsletter(event) {
      event.preventDefault();
      const email = event.target.querySelector('input[type="email"]').value;
      showToast(`Terima kasih! Email ${email} telah terdaftar untuk newsletter kami.`, 'success');
      event.target.reset();
      
      // Send notification if permission granted
      sendNotification('Newsletter Berhasil', {
        body: `Anda telah berlangganan newsletter dengan email ${email}.`,
        icon: 'https://i.imgur.com/7Yn5fUH.png'
      });
    }

    // Close sidebars when clicking outside
    document.addEventListener('click', (e) => {
      const cartSidebar = document.getElementById('cartSidebar');
      const recentSidebar = document.getElementById('recentSidebar');
      const floatingIcons = document.getElementById('floatingIcons');
      
      if (!cartSidebar.contains(e.target) && !floatingIcons.contains(e.target) && cartSidebar.classList.contains('open')) {
        toggleCart();
      }
      
      if (!recentSidebar.contains(e.target) && !floatingIcons.contains(e.target) && recentSidebar.classList.contains('open')) {
        toggleRecent();
      }
    });

    // Close payment page when clicking outside
    document.addEventListener('click', (e) => {
      const paymentPage = document.getElementById('paymentPage');
      const paymentContainer = document.querySelector('.payment-container');
      
      if (paymentPage.classList.contains('active') && 
          !paymentContainer.contains(e.target) && 
          !e.target.closest('.floating-icon') &&
          !e.target.closest('#payNowBtn') &&
          !e.target.closest('#addCartBtn')) {
        closePayment();
      }
    });

    // Initialize notification permission check
    document.addEventListener('DOMContentLoaded', () => {
      checkNotificationPermission();
    });
  </script>
</body>
</html>
